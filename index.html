<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>30-DAYS BYE-BYE MỠ BỤNG</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  :root{
    /* Pastel pink–peach theme */
    --p1:#ff8fab;   /* hồng nhạt */
    --p2:#ffb3c1;   /* hồng sáng */
    --p3:#ffd6a5;   /* cam nhạt */
    --p4:#ffe6b3;   /* vàng nhẹ */
    --mint:#cdeccd;
    --sky:#cfe4ff;

    --bg:#fff7fb; --bg-grad:#fff0f6;
    --text:#2b2b2b; --muted:#6b7280;
    --card:#ffffff; --border:#f4dbe3;
    --chip:#ffeaf1; --chip-border:#ffd6e3;

    --col-huong:#ff8fab;
    --col-thuy:#a5b4fc;
    --col-lien:#9adbb3;

    --success:#22c55e; --warn:#f59e0b;
  }
  *{box-sizing:border-box}
  body{
    margin:0;color:var(--text);
    font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    background:linear-gradient(180deg,var(--bg-grad) 0%, #fff 40%, #fff 100%) fixed;
  }
  .wrap{max-width:1200px;margin:28px auto;padding:0 18px}
  .hero{
    border:1px solid var(--border);border-radius:18px;padding:22px;
    background:linear-gradient(135deg,#fff0f6 0%,#fff 45%,#fff5f0 100%);
    box-shadow:0 12px 28px rgba(255,168,186,.20);
  }
  .hero h1{margin:0;font-size:30px;letter-spacing:.2px}
  .subtitle{margin-top:6px;color:var(--muted)}
  .chips{margin-top:10px;display:flex;gap:8px;flex-wrap:wrap}
  .chip{background:var(--chip);border:1px solid var(--chip-border);padding:6px 10px;border-radius:999px;font-size:12px}

  .grid{display:grid;gap:16px;margin-top:16px}
  @media(min-width:980px){.grid{grid-template-columns:1.2fr .8fr}}

  .card{
    background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;
    box-shadow:0 10px 24px rgba(255,152,175,.12);
  }
  .card h2{margin:0 0 12px;font-size:18px}

  .btn{border:1px solid var(--border);background:#fff;color:var(--text);padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:700}
  .btn:hover{filter:brightness(1.03)}
  .btn-pink{background:linear-gradient(90deg,var(--p1),var(--p3));border-color:#ffc3d1;color:#4a1d2a}
  .btn-soft{background:#fff;border-color:#f2c3c9}

  .row{display:flex;align-items:center;gap:12px;background:#fff;border:1px solid var(--border);padding:10px;border-radius:12px}
  .lb{display:flex;flex-direction:column;gap:10px}
  .medal{width:30px;height:30px;border-radius:50%;display:grid;place-items:center;font-weight:800;color:#7a4b00;background:linear-gradient(180deg,#ffd089,#ffbd63)}
  .medal.silver{background:linear-gradient(180deg,#e8eef7,#cfd8e6);color:#3c4a64}
  .medal.bronze{background:linear-gradient(180deg,#ffd9b3,#f1bb86);color:#6b3c09}

  .name{min-width:84px;display:flex;align-items:center;gap:8px}
  .avatar{width:26px;height:26px;border-radius:50%;display:grid;place-items:center;font-weight:800;color:#ffffff}
  .a-huong{background:var(--col-huong)} .a-thuy{background:var(--col-thuy)} .a-lien{background:var(--col-lien); color:#175b3a}

  .bar{width:100%;height:10px;background:#ffe9ef;border-radius:999px;overflow:hidden}
  .bar>span{display:block;height:100%}
  .cnt{margin-left:auto;font-variant-numeric:tabular-nums}
  .muted{color:var(--muted)}

  .legend{display:flex;gap:12px;flex-wrap:wrap;color:var(--muted);font-size:13px;margin-top:8px}
  .dot{width:10px;height:10px;border-radius:50%;display:inline-block;margin-right:6px;vertical-align:middle}

  table{width:100%;border-collapse:separate;border-spacing:0 8px}
  th,td{text-align:center;padding:8px;border-top:1px solid var(--border);border-bottom:1px solid var(--border);background:#fff}
  tbody tr{background:#fff}
  th:first-child,td:first-child{border-left:1px solid var(--border);border-top-left-radius:10px;border-bottom-left-radius:10px;text-align:left}
  th:last-child,td:last-child{border-right:1px solid var(--border);border-top-right-radius:10px;border-bottom-right-radius:10px}
  .daycell{user-select:none;position:relative}
  .daycell.enabled{cursor:pointer;transition:transform .05s}
  .daycell.enabled:active{transform:scale(.98)}
  .daycell.done{background:linear-gradient(180deg,rgba(34,197,94,.12),rgba(34,197,94,.04)); box-shadow:inset 0 0 0 2px rgba(34,197,94,.2)}
  .daycell.lock{opacity:.35}
  .editpin{position:absolute;right:6px;bottom:4px;font-size:12px;color:#9aa1b1}
  .editpin:hover{color:#555}

  .progressCol{display:flex;flex-direction:column;gap:10px}

  /* Toast & Modal */
  .toast{position:fixed;right:16px;bottom:16px;background:#fff;border:1px solid var(--border);padding:12px 14px;border-radius:12px;box-shadow:0 12px 30px rgba(0,0,0,.12);display:none}
  .toast.show{display:block;animation:fade .18s ease-out}
  @keyframes fade{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}

  .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.25);display:none;align-items:center;justify-content:center;padding:16px}
  .modal{background:#fff;border:1px solid var(--border);border-radius:16px;max-width:520px;width:100%;padding:16px}
  .modal h3{margin:0 0 10px}
  .modal .row{background:#fff}
  input[type="text"], input[type="number"], textarea, select{
    width:100%;background:#fff;border:1px solid #f1dfe6;border-radius:10px;padding:10px;color:var(--text)
  }

  /* Confetti canvas */
  canvas#confetti{position:fixed;inset:0;pointer-events:none}
</style>
</head>
<body>
<canvas id="confetti"></canvas>

<div class="wrap">
  <div class="hero">
    <h1>30-DAYS BYE-BYE MỠ BỤNG</h1>
    <div class="subtitle">Tone pastel hồng–cam nhạt. Mỗi người có <b>ngày bắt đầu riêng</b>. Được tick các ngày <b>đến hôm nay</b>, không tick tương lai. Có ghi chú/ảnh/cân nặng theo từng ngày & âm thanh “ding”.</div>
    <div class="chips">
      <span class="chip">✅ Backfill quá khứ</span>
      <span class="chip">🔔 Ding khi check-in</span>
      <span class="chip">🏅 Mốc 7/15/30 + Quote</span>
    </div>
  </div>

  <!-- CHỌN NGÀY BẮT ĐẦU -->
  <div class="card" style="margin-top:14px">
    <h2>🗓️ Thiết lập ngày bắt đầu</h2>
    <div class="row" style="gap:10px;align-items:center;flex-wrap:wrap">
      <div style="min-width:180px">
        <label>Thành viên</label>
        <select id="whoSelect">
          <option value="Huong">Hương</option>
          <option value="Thuy">Thùy</option>
          <option value="Lien">Liên</option>
        </select>
      </div>
      <div>
        <label>Ngày bắt đầu</label>
        <input type="date" id="startDateInput"/>
      </div>
      <div style="align-self:flex-end">
        <button class="btn btn-pink" id="saveStart">Lưu ngày bắt đầu</button>
      </div>
      <span class="muted">Hệ thống dùng ngày này để tính “hôm nay = ngày thứ mấy” với từng người.</span>
    </div>

    <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:12px" id="startSummary"></div>
  </div>

  <div class="grid">
    <!-- LEFT -->
    <div class="card">
      <h2>🏆 Leaderboard (tổng ✅ & 🔥streak)</h2>
      <div id="leaderboard" class="lb"></div>

      <div style="margin-top:10px;display:flex;gap:10px;flex-wrap:wrap">
        <button class="btn btn-pink"  onclick="checkin('Huong')">✅ Check-in: Hương</button>
        <button class="btn btn-pink"  onclick="checkin('Thuy')" style="background:linear-gradient(90deg,#a5b4fc,#c7d2fe)">✅ Check-in: Thùy</button>
        <button class="btn btn-pink"  onclick="checkin('Lie
